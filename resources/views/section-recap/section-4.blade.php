<h3 class="mt-3 text-center">Section 4 (Identifikasi isu terkait risiko teknologi informasi organisasi)</h3>

<!-- Deskripsi -->
<p class="mt-3">
    Kuisioner ini bertujuan untuk mengidentifikasi isu terkait risiko teknologi informasi (TI)
    yang dihadapi oleh organisasi Anda. Kuisioner ini berfokus pada penilaian tingkat
    kepentingan dari berbagai isu yang berkaitan dengan risiko TI, berdasarkan kondisi dan
    prioritas saat ini. Penilaian Anda akan membantu dalam mengidentifikasi area yang perlu
    mendapat perhatian lebih dalam pengelolaan risiko TI di organisasi.<br>
    Pengisian pada kolom tingkat kepentingan menggunakan skala 1 s.d 5 dengan keterangan
    sebagai berikut:
</p>
<p>
    <strong>Skala tingkat kepentingan : </strong><br>
    1 = Sangat tidak penting<br>
    2 = Tidak penting<br>
    3 = Penting<br>
    4 = Cukup penting<br>
    5 = Sangat penting
</p>

<div class="text-end mb-3">
    <small id="lastUpdated-section-4" class="text-muted"></small>
</div>

<!-- Tabel -->
<div class="table-responsive mt-4">
    <table class="table table-bordered">
        <thead class="thead-light">
            <tr>
                <th>Acuan</th>
                <th>Deskripsi</th>
                <th>Tingkat Kepentingan (1-5)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>A</td>
                <td>Kegagalan antara entitas TI yang berbeda di seluruh organisasi
                    karena persepsi kontribusi yang rendah terhadap nilai bisnis</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_1"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>B</td>
                <td>Kegagalan antara departemen bisnis (yaitu, pelanggan TI) dan
                    departemen TI karena gagalnya inisiatif atau persepsi kontribusi
                    yang rendah terhadap nilai bisnis</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_2"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>C</td>
                <td>Insiden berkaitan dengan TI yang signifikan, seperti kehilangan
                    data, pelanggaran keamanan, kegagalan proyek, kesalahan
                    aplikasi, yang terkait dengan TI</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_3"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>D</td>
                <td>Permasalahan terkait pengiriman layanan oleh pihak outsourcing
                    TI</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_4"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>E</td>
                <td>Kegagalan dalam pemenuhan persyaratan peraturan atau kontrak
                    terkait TI</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_5"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>F</td>
                <td>Temuan audit rutin atau laporan penilaian lainnya terkait kinerja
                    TI yang buruk atau masalah kualitas TI atau layanan TI yang
                    dilaporkan</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_6"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>G</td>
                <td>Pengeluaran TI yang signifikan dan dilakukan secara
                    tersembunyi, yaitu pengeluaran TI oleh departemen pengguna di
                    luar kontrol mekanisme pengambilan keputusan investasi TI yang
                    normal dan anggaran yang disetujui</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_7"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>H</td>
                <td>Penggandaan atau tumpang tindih antara berbagai inisiatif, atau
                    bentuk lain pemborosan sumber daya</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_8"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>I</td>
                <td>Sumber daya TI yang tidak mencukupi, staf dengan keterampilan
                    yang tidak memadai, atau staf yang mengalami kelelahan atau
                    ketidakpuasan</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_9"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>J</td>
                <td>Perubahan atau proyek yang didukung oleh TI sering gagal
                    memenuhi kebutuhan bisnis dan seringkali terlambat atau
                    melebihi anggaran</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_10"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>K</td>
                <td>Keraguan oleh anggota dewan, eksekutif, atau manajemen senior
                    untuk terlibat dengan TI, atau kurangnya sponsor bisnis yang
                    komitmen terhadap TI</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_11"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>L</td>
                <td>Model operasional TI yang kompleks dan/atau mekanisme
                    pengambilan keputusan yang tidak jelas untuk Keputusan yang
                    berkaitan dengan TI</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_12"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>M</td>
                <td>Biaya TI yang terlalu tinggi</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_13"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>N</td>
                <td>Implementasi inisiatif atau inovasi baru yang gagal atau gagal
                    yang disebabkan oleh arsitektur dan sistem TI saat ini
                </td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_14"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>O</td>
                <td>Kesenjangan antara pengetahuan bisnis dan teknis yang
                    mengarah pada pengguna bisnis dan spesialis TI atau teknologi
                    yang digunakan</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_15"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>P</td>
                <td>Permasalahan yang berkaitan dengan data dan integrasi data di
                    berbagai sumber</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_16"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>Q</td>
                <td>Level komputasi end-user yang tinggi, menciptakan masalah
                    yaitu kurangnya pengawasan dan kontrol kualitas atas aplikasi
                    yang sedang dikembangkan dan dioperasikan</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_17"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>R</td>
                <td>Departemen bisnis yang menerapkan solusi informasi mereka
                    sendiri dengan sedikit atau tanpa keterlibatan departemen IT
                    perusahaan (terkait dengan komputasi pengguna akhir, yang
                    sering kali berasal dari ketidakpuasan terhadap solusi dan layanan
                    IT)</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_18"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>S</td>
                <td>Ketidaktahuan atau ketidakpatuhan terhadap peraturan keamanan
                    dan privasi</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_19"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>T</td>
                <td>Ketidakmampuan untuk mengeksploitasi teknologi baru atau
                    berinovasi menggunakan I&T</td>
                <td>
                    <div style="width: 120px; height: 120px; margin: auto;">
                        <canvas id="section_4_20"></canvas>
                    </div>
                    <div class="mt-2 text-center">
                        <span class="badge" style="background-color: #FF6384;">1</span>
                        <span class="badge" style="background-color: #36A2EB;">2</span>
                        <span class="badge" style="background-color: #FFCE56;">3</span>
                        <span class="badge" style="background-color: #4BC0C0;">4</span>
                        <span class="badge" style="background-color: #9966FF;">5</span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <h4 class="mt-4 text-center">Kritik dan Saran Section 4</h4>
    <div id="kritikSaranCarousel-section-4" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" id="kritikSaranContent-section-4">
            <div class="carousel-item active">
            </div>
        </div>
        <a class="carousel-control-prev" href="#kritikSaranCarousel-section-4" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#kritikSaranCarousel-section-4" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>


@push('scripts')
    <script>
        // Chart instances
        let section_4_1, section_4_2, section_4_3, section_4_4, section_4_5, section_4_6, section_4_7, section_4_8, section_4_9, section_4_10, section_4_11, section_4_12, section_4_13, section_4_14, section_4_15, section_4_16, section_4_17, section_4_18, section_4_19, section_4_20;

        // Fungsi untuk inisialisasi chart
        function createChart(canvasId, data) {
            const ctx = document.getElementById(canvasId).getContext("2d");
            return new Chart(ctx, {
                type: "pie",
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false,
                        },
                    },
                },
            });
        }

        // Fetch and update data
        async function fetchData_section_4(formId) {
            try {
                const response = await fetch(`/data-section-4/${formId}`);
                const data = await response.json();

                if (data) {
                    section_4_1.data.datasets[0].data = [
                        data.pertanyaan_1_jawaban_1,
                        data.pertanyaan_1_jawaban_2,
                        data.pertanyaan_1_jawaban_3,
                        data.pertanyaan_1_jawaban_4,
                        data.pertanyaan_1_jawaban_5
                    ];
                    section_4_1.update();

                    section_4_2.data.datasets[0].data = [
                        data.pertanyaan_2_jawaban_1,
                        data.pertanyaan_2_jawaban_2,
                        data.pertanyaan_2_jawaban_3,
                        data.pertanyaan_2_jawaban_4,
                        data.pertanyaan_2_jawaban_5
                    ];
                    section_4_2.update();

                    section_4_3.data.datasets[0].data = [
                        data.pertanyaan_3_jawaban_1,
                        data.pertanyaan_3_jawaban_2,
                        data.pertanyaan_3_jawaban_3,
                        data.pertanyaan_3_jawaban_4,
                        data.pertanyaan_3_jawaban_5
                    ];
                    section_4_3.update();

                    section_4_4.data.datasets[0].data = [
                        data.pertanyaan_4_jawaban_1,
                        data.pertanyaan_4_jawaban_2,
                        data.pertanyaan_4_jawaban_3,
                        data.pertanyaan_4_jawaban_4,
                        data.pertanyaan_4_jawaban_5
                    ];
                    section_4_4.update();

                    section_4_5.data.datasets[0].data = [
                        data.pertanyaan_5_jawaban_1,
                        data.pertanyaan_5_jawaban_2,
                        data.pertanyaan_5_jawaban_3,
                        data.pertanyaan_5_jawaban_4,
                        data.pertanyaan_5_jawaban_5
                    ];
                    section_4_5.update();

                    section_4_6.data.datasets[0].data = [
                        data.pertanyaan_6_jawaban_1,
                        data.pertanyaan_6_jawaban_2,
                        data.pertanyaan_6_jawaban_3,
                        data.pertanyaan_6_jawaban_4,
                        data.pertanyaan_6_jawaban_5
                    ];
                    section_4_6.update();

                    section_4_7.data.datasets[0].data = [
                        data.pertanyaan_7_jawaban_1,
                        data.pertanyaan_7_jawaban_2,
                        data.pertanyaan_7_jawaban_3,
                        data.pertanyaan_7_jawaban_4,
                        data.pertanyaan_7_jawaban_5
                    ];
                    section_4_7.update();

                    section_4_8.data.datasets[0].data = [
                        data.pertanyaan_8_jawaban_1,
                        data.pertanyaan_8_jawaban_2,
                        data.pertanyaan_8_jawaban_3,
                        data.pertanyaan_8_jawaban_4,
                        data.pertanyaan_8_jawaban_5
                    ];
                    section_4_8.update();

                    section_4_9.data.datasets[0].data = [
                        data.pertanyaan_9_jawaban_1,
                        data.pertanyaan_9_jawaban_2,
                        data.pertanyaan_9_jawaban_3,
                        data.pertanyaan_9_jawaban_4,
                        data.pertanyaan_9_jawaban_5
                    ];
                    section_4_9.update();

                    section_4_10.data.datasets[0].data = [
                        data.pertanyaan_10_jawaban_1,
                        data.pertanyaan_10_jawaban_2,
                        data.pertanyaan_10_jawaban_3,
                        data.pertanyaan_10_jawaban_4,
                        data.pertanyaan_10_jawaban_5
                    ];
                    section_4_10.update();

                    section_4_11.data.datasets[0].data = [
                        data.pertanyaan_11_jawaban_1,
                        data.pertanyaan_11_jawaban_2,
                        data.pertanyaan_11_jawaban_3,
                        data.pertanyaan_11_jawaban_4,
                        data.pertanyaan_11_jawaban_5
                    ];
                    section_4_11.update();

                    section_4_12.data.datasets[0].data = [
                        data.pertanyaan_12_jawaban_1,
                        data.pertanyaan_12_jawaban_2,
                        data.pertanyaan_12_jawaban_3,
                        data.pertanyaan_12_jawaban_4,
                        data.pertanyaan_12_jawaban_5
                    ];
                    section_4_12.update();

                    section_4_13.data.datasets[0].data = [
                        data.pertanyaan_13_jawaban_1,
                        data.pertanyaan_13_jawaban_2,
                        data.pertanyaan_13_jawaban_3,
                        data.pertanyaan_13_jawaban_4,
                        data.pertanyaan_13_jawaban_5
                    ];
                    section_4_13.update();

                    section_4_14.data.datasets[0].data = [
                        data.pertanyaan_14_jawaban_1,
                        data.pertanyaan_14_jawaban_2,
                        data.pertanyaan_14_jawaban_3,
                        data.pertanyaan_14_jawaban_4,
                        data.pertanyaan_14_jawaban_5
                    ];
                    section_4_14.update();

                    section_4_15.data.datasets[0].data = [
                        data.pertanyaan_15_jawaban_1,
                        data.pertanyaan_15_jawaban_2,
                        data.pertanyaan_15_jawaban_3,
                        data.pertanyaan_15_jawaban_4,
                        data.pertanyaan_15_jawaban_5
                    ];
                    section_4_15.update();

                    section_4_16.data.datasets[0].data = [
                        data.pertanyaan_16_jawaban_1,
                        data.pertanyaan_16_jawaban_2,
                        data.pertanyaan_16_jawaban_3,
                        data.pertanyaan_16_jawaban_4,
                        data.pertanyaan_16_jawaban_5
                    ];
                    section_4_16.update();

                    section_4_17.data.datasets[0].data = [
                        data.pertanyaan_17_jawaban_1,
                        data.pertanyaan_17_jawaban_2,
                        data.pertanyaan_17_jawaban_3,
                        data.pertanyaan_17_jawaban_4,
                        data.pertanyaan_17_jawaban_5
                    ];
                    section_4_17.update();

                    section_4_18.data.datasets[0].data = [
                        data.pertanyaan_18_jawaban_1,
                        data.pertanyaan_18_jawaban_2,
                        data.pertanyaan_18_jawaban_3,
                        data.pertanyaan_18_jawaban_4,
                        data.pertanyaan_18_jawaban_5
                    ];
                    section_4_18.update();

                    section_4_19.data.datasets[0].data = [
                        data.pertanyaan_19_jawaban_1,
                        data.pertanyaan_19_jawaban_2,
                        data.pertanyaan_19_jawaban_3,
                        data.pertanyaan_19_jawaban_4,
                        data.pertanyaan_19_jawaban_5
                    ];
                    section_4_19.update();

                    section_4_20.data.datasets[0].data = [
                        data.pertanyaan_20_jawaban_1,
                        data.pertanyaan_20_jawaban_2,
                        data.pertanyaan_20_jawaban_3,
                        data.pertanyaan_20_jawaban_4,
                        data.pertanyaan_20_jawaban_5
                    ];
                    section_4_20.update();

                    // Update last updated timestamp if needed
                    if (data) {
                        const totalResponses = data.total_responses ?? 0;
                        const totalAuditee = data.total_auditee ?? 0;
                        const lastUpdated = data.last_updated_at ?
                            `Terakhir diperbarui: ${new Date(data.last_updated_at).toLocaleString('id-ID')}` :
                            'Belum ada data';

                        document.getElementById('lastUpdated-section-4').textContent =
                            `Total Responden: ${totalResponses} Orang dari ${totalAuditee} Auditee, ${lastUpdated}`;
                    } else {
                        document.getElementById('lastUpdated-section-4').textContent =
                            'Belum ada data tersedia';
                    }
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
            // Create charts
            section_4_1 = createChart("section_4_1", {
                ...dataTemplate
            });

            section_4_2 = createChart("section_4_2", {
                ...dataTemplate
            });

            section_4_3 = createChart("section_4_3", {
                ...dataTemplate
            });

            section_4_4 = createChart("section_4_4", {
                ...dataTemplate
            });

            section_4_5 = createChart("section_4_5", {
                ...dataTemplate
            });

            section_4_6 = createChart("section_4_6", {
                ...dataTemplate
            });

            section_4_7 = createChart("section_4_7", {
                ...dataTemplate
            });

            section_4_8 = createChart("section_4_8", {
                ...dataTemplate
            });

            section_4_9 = createChart("section_4_9", {
                ...dataTemplate
            });

            section_4_10 = createChart("section_4_10", {
                ...dataTemplate
            });

            section_4_11 = createChart("section_4_11", {
                ...dataTemplate
            });

            section_4_12 = createChart("section_4_12", {
                ...dataTemplate
            });

            section_4_13 = createChart("section_4_13", {
                ...dataTemplate
            });

            section_4_14 = createChart("section_4_14", {
                ...dataTemplate
            });

            section_4_15 = createChart("section_4_15", {
                ...dataTemplate
            });

            section_4_16 = createChart("section_4_16", {
                ...dataTemplate
            });

            section_4_17 = createChart("section_4_17", {
                ...dataTemplate
            });

            section_4_18 = createChart("section_4_18", {
                ...dataTemplate
            });

            section_4_19 = createChart("section_4_19", {
                ...dataTemplate
            });

            section_4_20 = createChart("section_4_20", {
                ...dataTemplate
            });

            // Fetch initial data (replace 1 with your actual form_id)
            fetchData_section_4('{{ $form->id }}');
        });

        $(document).ready(function() {
            let formId = '{{ $form->id }}'; // Ganti dengan ID form yang sesuai
            $.ajax({
                url: `/kritik-saran-section-4/${formId}`,
                method: "GET",
                success: function(data) {
                    let container = $("#kritikSaranContent-section-4");
                    container.empty(); // Kosongkan kontainer sebelum menambahkan data baru

                    if (data.kritik_saran === "Tidak ada kritik dan saran") {
                        container.append(`<div class="carousel-item active">
                        <div class="card shadow-sm p-3">
                            <p class="text-dark text-center">Tidak ada kritik dan saran tersedia</p>
                        </div>
                    </div>`);
                        return;
                    }

                    $.each(data, function(index, item) {
                        let isActive = index === 0 ? "active" : "";
                        container.append(`<div class="carousel-item ${isActive}">
                        <div class="card shadow-sm p-4">
                            <p class="text-primary font-weight-bold text-center"
                            style="font-size: 1.2rem;">"${item.kritik_saran}"</p>
                        </div>
                    </div>`);
                    });

                    // Aktifkan carousel setelah data dimuat
                    $('#kritikSaranCarousel-section-4').carousel();
                },
                error: function() {
                    console.error("Error mengambil data");
                }
            });
        });
    </script>
@endpush
